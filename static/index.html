<!doctype html>
<html>
  <head>
    <title>Run Lola Run</title>
    <link href="//cdn.rawgit.com/noelboss/featherlight/1.4.0/release/featherlight.min.css" type="text/css" rel="stylesheet" />
    <link rel="stylesheet" href="css/bootstrap.css"/>
    <link rel="stylesheet" href="css/style.css"/>
    <link rel="stylesheet" href="css/animate.css"/>

    <script src="js/tags.js"></script>
    <script src="js/jquery.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script src="js/js.cookie.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="//cdn.rawgit.com/noelboss/featherlight/1.4.0/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/page.js"></script>


  </head>
  <section id="splash">
    <div class="container">
      <img src="img/phone.png" class="animated infinite pulse" onclick="closeSplash();" />
      <br><h2>Pickup the Phone</h2>
    </div>
  </section>
  <section id="intro">
    <div class="container">
        <video id="intro_video" width="500" height="500" preload autoplay controls>
          <source src="http://s3.amazonaws.com/lola-videos/intro.mov" type="video/mp4">
        </video>
    </div>
  </section>

  <script>
      document.getElementById('intro_video').addEventListener('ended',myHandler,false);
      function myHandler(e) {
          closeIntro();
      }

  </script>
  <body>
    <div id="background">
    </div>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" id="brand">Run Lola Run</a>
          <a id="brand" href="#" data-featherlight="<p>This is about Run Lola RUn</p>">about</a>
        </div>
      </div>
    </nav>
    <div id="chat" class="container">
      <div class="row center">
        <div class="col-xs-8 col-xs-offset-2">
          <ul id="chatlog" class="list-group js-chat-log"></ul>
          <div class="input-group input-group-lg">
            <input type="text" class="form-control js-text" placeholder="Type something to begin..."/>
            <span class="input-group-btn">
              <button class="btn btn-primary js-say">Submit</button>
            </span>
          </div>
        </div>
      </div>
    </div>

    <script src="js/app.js"></script>
    <script>
      var csrftoken = Cookies.get('csrftoken');

      function csrfSafeMethod(method) {
        // these HTTP methods do not require CSRF protection
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
      }

      $.ajaxSetup({
        beforeSend: function(xhr, settings) {
          if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
          }
        }
      });

      var $chatlog = $('.js-chat-log');
      var $input = $('.js-text');
      var $sayButton = $('.js-say');

      var $inputTemplate = $('<li class="list-group-item inputText"></li>');
      var $outputTemplate = $('<li class="list-group-item"></li>');

      setupApp($chatlog, $inputTemplate, $outputTemplate);

      $sayButton.click(function() {
        if ($input.length > 0) {
          submitInput($input);
        }
      });

      $input.keydown(function(event) {
        // Submit the input when the enter button is pressed
        if (event.keyCode == 13 && $input.length > 0) {
          submitInput($input);
        }
      });
    </script>
  </body>
</html>
